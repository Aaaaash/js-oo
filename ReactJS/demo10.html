<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="build/react.js" charset="utf-8"></script>
        <script src="build/react-dom.js" charset="utf-8"></script>
        <script src="build/browser.min.js"></script>
    </head>
    <body>
        <div id="example"></div>
        <script type="text/babel">
            // 组件的生命周期分成三个状态
            // 1.Mounting：已插入真实DOM
            // 2.Updating：正在被重新渲染
            // 3.Unmounting：已移出真实DOM
            // React为每个状态都提供了两种处理函数，will函数在进入状态之前调用，did函数在进入状态之后调用，三种状态攻击五种处理函数
                /*
                componentWillMount()
                componentDidMount()
                componentWillUpdate(object nextProps,object nextState)
                componentDidUpdate(object prevProps,object prevState)
                componentWillUnmount()
                */
            // 此外，React还提供两种特殊状态的处理函数
            //  componentWillRectiveProps(object nextProps):已加载组件收到新的参数时调用
            // shouldComponentUpdate(object nextProps,object nextState):组件判断是否重新渲染时调用

            var Hello=React.createClass({
                getInitialState:function(){
                    return {
                        opacity:1.0
                    };
                },
                componentDidMount:function(){
                    // 插入真实DOM（进入状态）
                    this.timer=setInterval(function(){
                        var opacity=this.state.opacity;
                        // opacity属于交互状态，要用this.state获取
                        opacity-=0.05;
                        if(opacity<0.1){
                            opacity=1.0;
                        }
                        this.setState({
                            opacity:opacity
                        });
                    }.bind(this),100);
                    console.log('what\'s the fuck?');
                },
                render:function(){
                    return (
                        <div style={{opacity:this.state.opacity}}>
                            Hello {this.props.name}
                        </div>
                    );
                }
            });
            ReactDOM.render(
                <Hello name="Sakura" />,
                document.body
            );
            // 以上代码在Hello组件加载（插入真实DOM）后，通过componentDidMount方法设置一个定时器，每隔100毫秒就重新设置组建的透明度，从而引发重新渲染
            // 组件的style属性的设置方式必须要写两重{}
            // 因为React组件样式是一个对象，第一重大括号表示这是javascr语法，第二重括号表示样式对象
        </script>
    </body>
</html>
